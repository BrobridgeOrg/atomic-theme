!function(){function s(){$('<li><span class="button red-ui-publish-button" id="red-ui-header-button-publish"><i class="icon"></i><span class="label">Publish</span></span></li>').appendTo(".red-ui-header-toolbar"),$("#red-ui-header-button-publish").on("click",function(e){e.preventDefault(),$("#red-ui-header-button-publish").hasClass("disabled")||(RED.user.hasPermission("flows.write")?($("#red-ui-header-button-publish").addClass("disabled"),RED.nodes.dirty(!1),RED.notify("<p>Publishing...</p>","info"),$.ajax({url:"publish",type:"POST",data:JSON.stringify({}),contentType:"application/json; charset=utf-8"}).done(function(e,s,i){RED.nodes.dirty(!1),RED.notify("<p>Publish Successfully</p>","success"),$("#red-ui-header-button-publish").removeClass("disabled")}).fail(function(e,s,i){RED.nodes.dirty(!0),$("#red-ui-header-button-publish").removeClass("disabled"),401===e.status?RED.notify(RED._("deploy.deployFailed",{message:RED._("user.notAuthorized")}),"error"):409===e.status?resolveConflict(nns,!0):e.responseText?RED.notify(RED._("deploy.deployFailed",{message:e.responseText}),"error"):RED.notify(RED._("deploy.deployFailed",{message:RED._("deploy.errors.noResponse")}),"error")}).always(function(){})):RED.notify(RED._("user.errors.deploy"),"error"))})}window.addEventListener("load",function(e){s()})}();